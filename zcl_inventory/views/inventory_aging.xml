<?xml version="1.0" encoding="utf-8"?>

<odoo>

    <record id="stock_valuation_layer_pivot_custom" model="ir.ui.view">
        <field name="name">stock.valuation.layer.pivot</field>
        <field name="model">stock.valuation.layer</field>
        <field name="arch" type="xml">
            <pivot>
                <field name="remaining_qty" type="measure"/>
                <field name="remaining_value" type="measure"/>
                <field name="quantity" type="measure"/>
                <field name="value" type="measure"/>
            </pivot>
        </field>
    </record>


    <record id="custom_action_inventory_aging" model="ir.actions.act_window">
        <field name="name">Ageing Report</field>
        <field name="res_model">stock.valuation.layer</field>
        <field name="view_mode">pivot</field>
        <field name="view_id" ref="stock_account.stock_valuation_layer_pivot"/>
        <field name="search_view_id" ref="stock_account.view_inventory_valuation_search"/>
        <field name="context">
	      {
            'search_default_incoming': 1,
		    'search_default_has_remaining_qty': 1,
            'pivot_measures': ['remaining_qty', 'remaining_value', 'quantity', 'value'],
            'pivot_row_groupby': ['product_id'],}
		  </field>

    </record>

    <menuitem id="menu_custom_inventory_aging" name="Inventory Aging" parent="stock.menu_warehouse_report" sequence="260" action="custom_action_inventory_aging"/>

</odoo>