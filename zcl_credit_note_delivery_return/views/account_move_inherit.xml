<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="account_move_inherit" model="ir.ui.view">
            <field name="name">account.move.form.inherited</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button class="oe_stat_button" type="object" icon="fa-refresh"
                            name="action_view_returns" string="Returns" invisible="not return_ids"/>
                </xpath>
                <xpath expr="//div[@name='journal_div']" position="after">
                    <field name="sale_order_id" required="move_type == 'out_refund'"  invisible="move_type != 'out_refund' or not partner_id or not journal_id" options="{'no_create': True}" readonly="state != 'draft'"/>
                    <field name="purchase_order_id" required="move_type == 'in_refund'"  invisible="move_type != 'in_refund' or not partner_id or not journal_id" options="{'no_create': True}"/>
                    <field name="product_ids" widget="many2many_tags" invisible="1"/>
                </xpath>
                <xpath expr="//notebook//page[@name='invoice_tab']//list//field[@name='product_id']" position="replace">
<!--                    <field name="invisible">invisible</field>-->
                    <field name="product_id"
                       optional="show"
                       widget="product_label_section_and_note_field"
                       domain="
                            context.get('default_move_type') in ('out_invoice', 'out_refund', 'out_receipt')
                            and [('sale_ok', '=', True)]
                            or [('purchase_ok', '=', True)]
                       "
                        column_invisible="context.get('default_move_type') in ['out_refund', 'in_refund']"/>
                    <field name="product_id"
                       optional="show"
                       widget="product_label_section_and_note_field"
                       domain="
                            context.get('default_move_type') in ('out_refund', 'in_refund')
                            and [('id', 'in', parent.product_ids)]
                       "
                        column_invisible="context.get('default_move_type') not in ['out_refund', 'in_refund']"/>
                </xpath>
                <xpath expr="//notebook//page[@name='invoice_tab']//list//field[@name='product_id']" position="after">
                    <field name="lot_id"  column_invisible="1"/>
                    <field name="picking_id"  column_invisible="1"/>
                    <field name="stock_move_id"  column_invisible="1"/>

                </xpath>
            </field>
     </record>
</odoo>