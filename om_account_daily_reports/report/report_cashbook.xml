<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_cashbook">
        <t t-call="web.html_container">
            <t t-set="data_report_margin_top" t-value="12"/>
            <t t-set="data_report_header_spacing" t-value="17"/>
            <t t-set="data_report_dpi" t-value="110"/>
            <t t-call="web.internal_layout">
                <div class="page" style="padding-top:20px !important;">
                    <h2>Account Cash Book</h2>
                </div>
                <div class="row mt32">
                    <div class="col-4">
                        <strong>Journals:</strong>
                        <p t-esc="', '.join([ lt or '' for lt in print_journal ])"/>
                    </div>

                    <div class="col-2">
                        <strong>Start Date:</strong>
                        <p t-esc="data['date_from']"/>
                    </div>
                    <div class="col-2">

                        <strong>End Date:</strong>
                        <p t-esc="data['date_to']"/>
                    </div>
                    <div class="col-2">
                        <div style="width:70%;">
                            <strong>Sorted By:</strong>
                            <p t-if="data['sortby'] == 'sort_date'">Date</p>
                            <p t-if="data['sortby'] == 'sort_journal_partner'">Journal and Partner</p>
                        </div>


                    </div>
                    <div class="col-2">
                        <strong>Target Moves:</strong>
                        <p t-if="data['target_move'] == 'all'">All Entries</p>
                        <p t-if="data['target_move'] == 'posted'">Posted Entries</p>
                    </div>
                </div>
                <br/>

                <table class="table table-sm table-reports" style="width:100%;">
                    <thead>
                        <tr class="text-center" style="background-color: #f5f5f5">
                            <th>Date</th>
                            <th>Journal</th>
                            <th style="width:30%;white-space: nowrap;">Partner/Account Name</th>
<!--                            <th style="word-wrap: break-word;">Ref</th>-->
<!--                            <th style="white-space: normal;">Move</th>-->
<!--                            <th>Entry Label</th>-->
                            <th>Debit</th>
                            <th>Credit</th>
                            <th>Balance</th>
<!--                            <th groups="base.group_multi_currency">Currency</th>-->
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="Accounts" t-as="account">


<!--                            <tr style="font-weight: bold;">-->
<!--                                <td colspan="4">-->
<!--                                    <span style="color: white;" t-esc="'..'"/>-->
<!--                                    <span t-esc="account['code']"/>-->
<!--                                    <span t-esc="account['name']"/>-->
<!--                                </td>-->
<!--                                <td class="text-end">-->
<!--                                    <span t-esc="account['debit']"-->
<!--                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>-->
<!--                                </td>-->
<!--                                <td class="text-end">-->
<!--                                    <span t-esc="account['credit']"-->
<!--                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>-->
<!--                                </td>-->
<!--                                <td class="text-end">-->
<!--                                    <span t-esc="account['balance']"-->
<!--                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>-->
<!--                                </td>-->
<!--&lt;!&ndash;                                <td groups="base.group_multi_currency"/>&ndash;&gt;-->
<!--                            </tr>-->



                            <tr t-foreach="account['move_lines']" t-as="line">
                                <td>
                                    <t t-if="line['ldate']">
                                        <span t-esc="line['ldate'].strftime('%d/%m/%Y')"/>
                                    </t>
                                    <t t-else="">
                                        <span t-esc="line['ldate']"/>
                                    </t>
                                </td>
                                <td>
                                    <span t-esc="line['lcode']"/>
                                </td>
                                <td style="width:30%;white-space: nowrap;">
                                    <t t-if="line.get('partner_name')">
                                        <span t-esc="line['partner_name']"/>
                                    </t>
                                    <t t-else="">
                                        <span t-esc="account['name']"/>
                                    </t>
                                    <br/><br/>
                                    <i><span t-esc="line['move_name']"/></i>
                                </td>
<!--                                <td style="">-->
<!--                                    <span style="white-space: normal; word-wrap: break-word; word-break: break-word;" t-if="line['lref']" t-esc="line['lref']"/>-->

<!--                                </td>-->
<!--                                <td>-->
<!--                                    <span t-esc="line['move_name']"/>-->
<!--                                </td>-->
<!--                                <td style="white-space: normal;">-->
<!--                                    <span t-esc="line['lname']"/>-->
<!--                                </td>-->
                                <td class="text-end">
                                    <span t-esc="line['debit']"
                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-end">
                                    <span t-esc="line['credit']"
                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-end">
                                    <span t-esc="line['balance']"
                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
<!--                                <td t-if="line['amount_currency']" class="text-end"-->
<!--                                    groups="base.group_multi_currency">-->
<!--                                    <span t-esc="line['amount_currency'] if line['amount_currency'] > 0.00 else ''"/>-->
<!--                                    <span t-esc="line['currency_code'] if line['amount_currency'] > 0.00 else ''"/>-->
<!--                                </td>-->
                            </tr>


                            <tr style="font-weight: bold;">
                                <td colspan="3">
                                    <span style="color: white;" t-esc="'..'"/>
                                    <span t-esc="account['code']"/>
                                    <span t-esc="account['name']"/>
                                </td>
                                <td class="text-end">
                                    <span t-esc="account['debit']"
                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-end">
                                    <span t-esc="account['credit']"
                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-end">
                                    <span t-esc="account['balance']"
                                          t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
<!--                                <td groups="base.group_multi_currency"/>-->
                            </tr>
                        </t>
                    </tbody>

                </table>

            </t>
        </t>
    </template>

</odoo>